/* Generated by re2c 3.0 on Sun Jul 23 15:57:47 2023 */
#line 1 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"

#include "parser.h"

Includes parse_includes(const std::string& fileContents)
{
	Includes result;

	auto cursor = fileContents.cbegin(), marker = fileContents.cbegin();

	#line 20 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"


	const auto skip_line_comment = [&] ()
	{
		while (true)
		{
			
#line 21 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
{
	std::string::value_type yych;
	yych = *cursor;
	switch (yych) {
		case 0x00: goto yy1;
		case '\n': goto yy3;
		default: goto yy2;
	}
yy1:
	++cursor;
#line 29 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"
	{ return; }
#line 34 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
yy2:
	++cursor;
#line 28 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"
	{ continue; }
#line 39 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
yy3:
	++cursor;
#line 30 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"
	{ return; }
#line 44 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
}
#line 32 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"

		}
	};

	const auto skip_multi_comment = [&] () -> bool
	{
		unsigned depth = 1;

		while (true)
		{
			
#line 58 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
{
	std::string::value_type yych;
	yych = *cursor;
	switch (yych) {
		case 0x00: goto yy5;
		case '*': goto yy8;
		case '/': goto yy9;
		default: goto yy6;
	}
yy5:
	++cursor;
#line 44 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"
	{ return false; }
#line 72 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
yy6:
	++cursor;
yy7:
#line 45 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"
	{ continue; }
#line 78 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
yy8:
	yych = *++cursor;
	switch (yych) {
		case '/': goto yy10;
		default: goto yy7;
	}
yy9:
	yych = *++cursor;
	switch (yych) {
		case '*': goto yy11;
		default: goto yy7;
	}
yy10:
	++cursor;
#line 48 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"
	{ if ((--depth) == 0) return true; }
#line 95 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
yy11:
	++cursor;
#line 47 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"
	{ ++depth; }
#line 100 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
}
#line 50 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"

		}
	};

	const auto get_included_file = [&] () -> std::string
	{
		const auto token = cursor;

		
#line 112 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
{
	std::string::value_type yych;
	yych = *cursor;
	switch (yych) {
		case 0x00: goto yy13;
		case '\t':
		case '\n':
		case '\v':
		case '\r':
		case ' ': goto yy17;
		case '"': goto yy18;
		default: goto yy15;
	}
yy13:
	yych = *++cursor;
	switch (yych) {
		case '\t':
		case '\n':
		case '\v':
		case '\r':
		case ' ':
		case '"': goto yy14;
		default: goto yy15;
	}
yy14:
#line 61 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"
	{ return {}; }
#line 140 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
yy15:
	yych = *++cursor;
	switch (yych) {
		case '\t':
		case '\n':
		case '\v':
		case '\r':
		case ' ':
		case '"': goto yy16;
		default: goto yy15;
	}
yy16:
#line 67 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"
	{ return std::string(token, cursor); }
#line 155 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
yy17:
	++cursor;
#line 60 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"
	{ return {}; }
#line 160 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
yy18:
	yych = *++cursor;
	switch (yych) {
		case '"': goto yy19;
		default: goto yy18;
	}
yy19:
	++cursor;
#line 64 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"
	{ return std::string(token + 1, cursor - 1); }
#line 171 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
}
#line 69 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"

	};

	while (cursor <= fileContents.cend())
	{
		
#line 180 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
{
	std::string::value_type yych;
	yych = *cursor;
	switch (yych) {
		case 0x00: goto yy21;
		case '#': goto yy24;
		case '/': goto yy25;
		default: goto yy22;
	}
yy21:
	++cursor;
#line 77 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"
	{ return result; }
#line 194 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
yy22:
	++cursor;
yy23:
#line 76 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"
	{ continue; }
#line 200 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
yy24:
	yych = *(marker = ++cursor);
	switch (yych) {
		case 'i': goto yy26;
		default: goto yy23;
	}
yy25:
	yych = *++cursor;
	switch (yych) {
		case '*': goto yy28;
		case '/': goto yy29;
		default: goto yy23;
	}
yy26:
	yych = *++cursor;
	switch (yych) {
		case 'n': goto yy30;
		default: goto yy27;
	}
yy27:
	cursor = marker;
	goto yy23;
yy28:
	++cursor;
#line 80 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"
	{ skip_multi_comment(); continue; }
#line 227 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
yy29:
	++cursor;
#line 79 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"
	{ skip_line_comment(); continue; }
#line 232 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
yy30:
	yych = *++cursor;
	switch (yych) {
		case 'c': goto yy31;
		default: goto yy27;
	}
yy31:
	yych = *++cursor;
	switch (yych) {
		case 'b': goto yy32;
		case 'l': goto yy33;
		default: goto yy27;
	}
yy32:
	yych = *++cursor;
	switch (yych) {
		case 'i': goto yy34;
		default: goto yy27;
	}
yy33:
	yych = *++cursor;
	switch (yych) {
		case 'u': goto yy35;
		default: goto yy27;
	}
yy34:
	yych = *++cursor;
	switch (yych) {
		case 'n': goto yy36;
		default: goto yy27;
	}
yy35:
	yych = *++cursor;
	switch (yych) {
		case 'd': goto yy38;
		default: goto yy27;
	}
yy36:
	yych = *++cursor;
	switch (yych) {
		case '\t':
		case '\v':
		case '\r':
		case ' ': goto yy36;
		default: goto yy37;
	}
yy37:
#line 83 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"
	{ result.incbinFiles.push_back(get_included_file()); continue; }
#line 282 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
yy38:
	yych = *++cursor;
	switch (yych) {
		case 'e': goto yy39;
		default: goto yy27;
	}
yy39:
	yych = *++cursor;
	switch (yych) {
		case '\t':
		case '\v':
		case '\r':
		case ' ': goto yy39;
		default: goto yy40;
	}
yy40:
#line 82 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"
	{ result.includeFiles.push_back(get_included_file()); continue; }
#line 301 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.cpp"
}
#line 85 "/home/mokha/EventAssembler/.Sources/ea-dep/parser.repp"

	}

	return result;
}
